# .github/workflows/gradle-build.yml

name: Build Mod Jar

on:
  push:
    branches: [ "main" ] 
  pull_request:
    branches: [ "main" ] 
  workflow_dispatch: # Permette l'esecuzione manuale

jobs:
  build:
    runs-on: ubuntu-latest
    permissions:
      contents: read 

    steps:
    - name: â¬‡ï¸ Checkout Repository
      uses: actions/checkout@v4
      
    - name: ğŸ› ï¸ Set up JDK 17
      uses: actions/setup-java@v4
      with:
        java-version: '17' 
        distribution: 'temurin'
        cache: 'gradle'

    - name: âš™ï¸ Grant execute permission for gradlew
      run: chmod +x gradlew
      
    - name: ğŸ—ï¸ Build with Gradle
      run: ./gradlew build

    - name: ğŸ“¦ Upload Artifact (Mod JAR)
      uses: actions/upload-artifact@v4
      with:
        name: DuplicationMod-Fabric-JAR
        # Il percorso standard dove Gradle crea il JAR finale
        path: |
          build/libs/*.jar
          !build/libs/*-dev.jar 
          !build/libs/*-sources.jar
